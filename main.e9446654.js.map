{"version":3,"sources":["scripts/main.js"],"names":["buttonStart","document","querySelector","field","gameScore","fieldCells","querySelectorAll","messageLose","messageWin","messageStart","randomNumber","Math","floor","random","score","generate","randomCell","rows","cells","innerHTML","hiddenZero","forEach","cell","style","color","moveLeft","i","row","j","push","numbers","filter","num","empties","length","zeros","Array","fill","newRow","concat","moveRight","moveUp","column","newColumn","moveDown","sumCells","sum","showWinMessage","sumColumns","classList","toggle","showLoseMessage","isGameStopped","changeCellColor","className","addEventListener","add","remove","textContent","e","contains","key"],"mappings":";AAAA,aAEA,IAAMA,EAAcC,SAASC,cAAc,WACrCC,EAAQF,SAASC,cAAc,eAC/BE,EAAYH,SAASC,cAAc,eACnCG,EAAaJ,SAASK,iBAAiB,eACvCC,EAAcN,SAASC,cAAc,iBACrCM,EAAaP,SAASC,cAAc,gBACpCO,EAAeR,SAASC,cAAc,kBAEtCQ,EAAe,WAAMC,OAAAA,KAAKC,MAAsB,EAAhBD,KAAKE,WACvCC,EAAQ,EAuEZ,SAASC,IACDC,IAAAA,EAAab,EAAMc,KAAKP,KAAgBQ,MAAMR,KAEvB,MAAzBM,EAAWG,UACbH,EAAWG,UAAaR,KAAKE,SAAW,GAAO,IAAM,IAErDE,IAIJ,SAASK,IACPf,EAAWgB,QAAQ,SAAAC,GACO,IAAnBA,EAAKH,UACRG,EAAKC,MAAMC,MAAQ,UAEnBF,EAAKC,MAAMC,MAAQ,KAKzB,SAASC,IACF,IAAA,IAAIC,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAGrB,IAFCC,IAAAA,EAAM,GAEHC,EAAI,EAAGA,EAAI,EAAGA,IAAK,CACpBN,IAAAA,GAAQnB,EAAMc,KAAKS,GAAGR,MAAMU,GAAGT,UAErCQ,EAAIE,KAAKP,GAUN,IAPCQ,IAAAA,EAAUH,EAAII,OAAO,SAAAC,GAAOA,OAAAA,IAE5BC,EAAU,EAAIH,EAAQI,OACtBC,EAAQC,MAAMH,GAASI,KAAK,GAE5BC,EAASR,EAAQS,OAAOJ,GAErBP,EAAI,EAAGA,EAAI,EAAGA,IACrBzB,EAAMc,KAAKS,GAAGR,MAAMU,GAAGT,UAAYmB,EAAOV,IAKhD,SAASY,IACF,IAAA,IAAId,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAGrB,IAFCC,IAAAA,EAAM,GAEHC,EAAI,EAAGA,EAAI,EAAGA,IAAK,CACpBN,IAAAA,GAAQnB,EAAMc,KAAKS,GAAGR,MAAMU,GAAGT,UAErCQ,EAAIE,KAAKP,GAUN,IAPCQ,IAAAA,EAAUH,EAAII,OAAO,SAAAC,GAAOA,OAAAA,IAE5BC,EAAU,EAAIH,EAAQI,OAGtBI,EAFQF,MAAMH,GAASI,KAAK,GAEbE,OAAOT,GAEnBF,EAAI,EAAGA,EAAI,EAAGA,IACrBzB,EAAMc,KAAKS,GAAGR,MAAMU,GAAGT,UAAYmB,EAAOV,IAKhD,SAASa,IACF,IAAA,IAAIf,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAGrB,IAFCgB,IAAAA,EAAS,GAENd,EAAI,EAAGA,EAAI,EAAGA,IAAK,CACpBN,IAAAA,GAAQnB,EAAMc,KAAKW,GAAGV,MAAMQ,GAAGP,UAErCuB,EAAOb,KAAKP,GAUT,IAPCQ,IAAAA,EAAUY,EAAOX,OAAO,SAAAC,GAAOA,OAAAA,IAE/BC,EAAU,EAAIH,EAAQI,OACtBC,EAAQC,MAAMH,GAASI,KAAK,GAE5BM,EAAYb,EAAQS,OAAOJ,GAExBP,EAAI,EAAGA,EAAI,EAAGA,IACrBzB,EAAMc,KAAKW,GAAGV,MAAMQ,GAAGP,UAAYwB,EAAUf,IAKnD,SAASgB,IACF,IAAA,IAAIlB,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAGrB,IAFCgB,IAAAA,EAAS,GAENd,EAAI,EAAGA,EAAI,EAAGA,IAAK,CACpBN,IAAAA,GAAQnB,EAAMc,KAAKW,GAAGV,MAAMQ,GAAGP,UAErCuB,EAAOb,KAAKP,GAUT,IAPCQ,IAAAA,EAAUY,EAAOX,OAAO,SAAAC,GAAOA,OAAAA,IAE/BC,EAAU,EAAIH,EAAQI,OAGtBS,EAFQP,MAAMH,GAASI,KAAK,GAEVE,OAAOT,GAEtBF,EAAI,EAAGA,EAAI,EAAGA,IACrBzB,EAAMc,KAAKW,GAAGV,MAAMQ,GAAGP,UAAYwB,EAAUf,IAKnD,SAASiB,IACF,IAAA,IAAInB,EAAI,EAAGA,EAAI,EAAGA,IAChB,IAAA,IAAIE,EAAI,EAAGA,EAAI,EAAGA,IACjB,IAACzB,EAAMc,KAAKS,GAAGR,MAAMU,GAAGT,YACrBhB,EAAMc,KAAKS,GAAGR,MAAMU,EAAI,GAAGT,UAAW,CACrC2B,IAAAA,EAA0C,GAAnC3C,EAAMc,KAAKS,GAAGR,MAAMU,GAAGT,UAEpChB,EAAMc,KAAKS,GAAGR,MAAMU,GAAGT,UAAY2B,EACnC3C,EAAMc,KAAKS,GAAGR,MAAMU,EAAI,GAAGT,UAAY,EACvCL,GAASgC,EACT1C,EAAUe,UAAYL,EAK5BiC,IAGF,SAASC,IACF,IAAA,IAAItB,EAAI,EAAGA,EAAI,EAAGA,IAChB,IAAA,IAAIE,EAAI,EAAGA,EAAI,EAAGA,IACjB,IAACzB,EAAMc,KAAKW,GAAGV,MAAMQ,GAAGP,YACrBhB,EAAMc,KAAKW,EAAI,GAAGV,MAAMQ,GAAGP,UAAW,CACrC2B,IAAAA,EAA0C,GAAnC3C,EAAMc,KAAKW,GAAGV,MAAMQ,GAAGP,UAEpChB,EAAMc,KAAKW,GAAGV,MAAMQ,GAAGP,UAAY2B,EACnC3C,EAAMc,KAAKW,EAAI,GAAGV,MAAMQ,GAAGP,UAAY,EACvCL,GAASgC,EACT1C,EAAUe,UAAYL,EAK5BiC,IAGF,SAASA,IACF,IAAA,IAAIrB,EAAI,EAAGA,EAAI,EAAGA,IAChB,IAAA,IAAIE,EAAI,EAAGA,EAAI,EAAGA,IACqB,OAArCzB,EAAMc,KAAKS,GAAGR,MAAMU,GAAGT,WAC1BX,EAAWyC,UAAUC,OAAO,UAMpC,SAASC,IAGF,IAFDC,IAAAA,GAAgB,EAEX1B,EAAI,EAAGA,EAAI,EAAGA,IAChB,IAAA,IAAIE,EAAI,EAAGA,EAAI,EAAGA,IAAK,CACtB,IAACzB,EAAMc,KAAKW,GAAGV,MAAMQ,GAAGP,YACnBhB,EAAMc,KAAKW,EAAI,GAAGV,MAAMQ,GAAGP,YAC9BhB,EAAMc,KAAKS,GAAGR,MAAMU,GAAGT,YACpBhB,EAAMc,KAAKS,GAAGR,MAAMU,EAAI,GAAGT,WACO,IAArChB,EAAMc,KAAKS,GAAGR,MAAMU,GAAGT,UAE3B,OAEAiC,GAAgB,EAKlBA,GACF7C,EAAY0C,UAAUC,OAAO,UAIjC,SAASG,IACF,IAAA,IAAI3B,EAAI,EAAGA,EAAI,EAAGA,IAChB,IAAA,IAAIE,EAAI,EAAGA,EAAI,EAAGA,IACoB,MAArCzB,EAAMc,KAAKS,GAAGR,MAAMU,GAAGT,UACzBhB,EAAMc,KAAKS,GAAGR,MAAMU,GAAG0B,UAAY,aAEnCnD,EAAMc,KAAKS,GAAGR,MAAMU,GAAG0B,UACInD,sCAAAA,OAAAA,EAAMc,KAAKS,GAAGR,MAAMU,GAAGT,UADlD,cAhQRnB,EAAYuD,iBAAiB,QAAS,WACpClD,EAAWgB,QAAQ,SAAAC,GACjBA,EAAKH,UAAY,IAGnBL,EAAQ,EACRV,EAAUe,UAAY,EAEtBJ,IACAA,IAEAN,EAAawC,UAAUO,IAAI,UAC3BhD,EAAWyC,UAAUO,IAAI,UACzBjD,EAAY0C,UAAUO,IAAI,UAE1BxD,EAAYiD,UAAUQ,OAAO,SAC7BzD,EAAYiD,UAAUO,IAAI,WAC1BxD,EAAY0D,YAAc,UAE1BL,IACAjC,MAGFnB,SAASsD,iBAAiB,UAAW,SAACI,GAChC,GAACnD,EAAWyC,UAAUW,SAAS,YAC9B5D,EAAYiD,UAAUW,SAAS,SAI5BD,OAAAA,EAAEE,KACH,IAAA,YACHpC,IACAoB,IACApB,IACAV,IACAsC,IACAjC,IACA+B,IACA,MACG,IAAA,aACHX,IACAK,IACAL,IACAzB,IACAsC,IACAjC,IACA+B,IACA,MACG,IAAA,UACHV,IACAO,IACAP,IACA1B,IACAsC,IACAjC,IACA+B,IACA,MACG,IAAA,YACHP,IACAI,IACAJ,IACA7B,IACAsC,IACAjC,IACA+B","file":"main.e9446654.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst buttonStart = document.querySelector('.button');\nconst field = document.querySelector('.game-field');\nconst gameScore = document.querySelector('.game-score');\nconst fieldCells = document.querySelectorAll('.field-cell');\nconst messageLose = document.querySelector('.message-lose');\nconst messageWin = document.querySelector('.message-win');\nconst messageStart = document.querySelector('.message-start');\n\nconst randomNumber = () => Math.floor(Math.random() * 4);\nlet score = 0;\n\nbuttonStart.addEventListener('click', () => {\n  fieldCells.forEach(cell => {\n    cell.innerHTML = 0;\n  });\n\n  score = 0;\n  gameScore.innerHTML = 0;\n\n  generate();\n  generate();\n\n  messageStart.classList.add('hidden');\n  messageWin.classList.add('hidden');\n  messageLose.classList.add('hidden');\n\n  buttonStart.classList.remove('start');\n  buttonStart.classList.add('restart');\n  buttonStart.textContent = 'Restart';\n\n  changeCellColor();\n  hiddenZero();\n});\n\ndocument.addEventListener('keydown', (e) => {\n  if (!messageWin.classList.contains('hidden')\n    || buttonStart.classList.contains('start')) {\n    return;\n  }\n\n  switch (e.key) {\n    case 'ArrowLeft':\n      moveLeft();\n      sumCells();\n      moveLeft();\n      generate();\n      changeCellColor();\n      hiddenZero();\n      showLoseMessage();\n      break;\n    case 'ArrowRight':\n      moveRight();\n      sumCells();\n      moveRight();\n      generate();\n      changeCellColor();\n      hiddenZero();\n      showLoseMessage();\n      break;\n    case 'ArrowUp':\n      moveUp();\n      sumColumns();\n      moveUp();\n      generate();\n      changeCellColor();\n      hiddenZero();\n      showLoseMessage();\n      break;\n    case 'ArrowDown':\n      moveDown();\n      sumColumns();\n      moveDown();\n      generate();\n      changeCellColor();\n      hiddenZero();\n      showLoseMessage();\n      break;\n  }\n});\n\nfunction generate() {\n  const randomCell = field.rows[randomNumber()].cells[randomNumber()];\n\n  if (randomCell.innerHTML === '0') {\n    randomCell.innerHTML = (Math.random() < 0.1) ? '4' : '2';\n  } else {\n    generate();\n  }\n};\n\nfunction hiddenZero() {\n  fieldCells.forEach(cell => {\n    if (+cell.innerHTML === 0) {\n      cell.style.color = '#d6cdc4';\n    } else {\n      cell.style.color = '';\n    }\n  });\n}\n\nfunction moveLeft() {\n  for (let i = 0; i < 4; i++) {\n    const row = [];\n\n    for (let j = 0; j < 4; j++) {\n      const cell = +field.rows[i].cells[j].innerHTML;\n\n      row.push(cell);\n    }\n\n    const numbers = row.filter(num => num);\n\n    const empties = 4 - numbers.length;\n    const zeros = Array(empties).fill(0);\n\n    const newRow = numbers.concat(zeros);\n\n    for (let j = 0; j < 4; j++) {\n      field.rows[i].cells[j].innerHTML = newRow[j];\n    }\n  }\n}\n\nfunction moveRight() {\n  for (let i = 0; i < 4; i++) {\n    const row = [];\n\n    for (let j = 0; j < 4; j++) {\n      const cell = +field.rows[i].cells[j].innerHTML;\n\n      row.push(cell);\n    }\n\n    const numbers = row.filter(num => num);\n\n    const empties = 4 - numbers.length;\n    const zeros = Array(empties).fill(0);\n\n    const newRow = zeros.concat(numbers);\n\n    for (let j = 0; j < 4; j++) {\n      field.rows[i].cells[j].innerHTML = newRow[j];\n    }\n  }\n}\n\nfunction moveUp() {\n  for (let i = 0; i < 4; i++) {\n    const column = [];\n\n    for (let j = 0; j < 4; j++) {\n      const cell = +field.rows[j].cells[i].innerHTML;\n\n      column.push(cell);\n    }\n\n    const numbers = column.filter(num => num);\n\n    const empties = 4 - numbers.length;\n    const zeros = Array(empties).fill(0);\n\n    const newColumn = numbers.concat(zeros);\n\n    for (let j = 0; j < 4; j++) {\n      field.rows[j].cells[i].innerHTML = newColumn[j];\n    }\n  }\n}\n\nfunction moveDown() {\n  for (let i = 0; i < 4; i++) {\n    const column = [];\n\n    for (let j = 0; j < 4; j++) {\n      const cell = +field.rows[j].cells[i].innerHTML;\n\n      column.push(cell);\n    }\n\n    const numbers = column.filter(num => num);\n\n    const empties = 4 - numbers.length;\n    const zeros = Array(empties).fill(0);\n\n    const newColumn = zeros.concat(numbers);\n\n    for (let j = 0; j < 4; j++) {\n      field.rows[j].cells[i].innerHTML = newColumn[j];\n    }\n  }\n}\n\nfunction sumCells() {\n  for (let i = 0; i < 4; i++) {\n    for (let j = 0; j < 3; j++) {\n      if (+field.rows[i].cells[j].innerHTML\n        === +field.rows[i].cells[j + 1].innerHTML) {\n        const sum = +field.rows[i].cells[j].innerHTML * 2;\n\n        field.rows[i].cells[j].innerHTML = sum;\n        field.rows[i].cells[j + 1].innerHTML = 0;\n        score += sum;\n        gameScore.innerHTML = score;\n      }\n    }\n  }\n\n  showWinMessage();\n}\n\nfunction sumColumns() {\n  for (let i = 0; i < 4; i++) {\n    for (let j = 0; j < 3; j++) {\n      if (+field.rows[j].cells[i].innerHTML\n        === +field.rows[j + 1].cells[i].innerHTML) {\n        const sum = +field.rows[j].cells[i].innerHTML * 2;\n\n        field.rows[j].cells[i].innerHTML = sum;\n        field.rows[j + 1].cells[i].innerHTML = 0;\n        score += sum;\n        gameScore.innerHTML = score;\n      }\n    }\n  }\n\n  showWinMessage();\n}\n\nfunction showWinMessage() {\n  for (let i = 0; i < 4; i++) {\n    for (let j = 0; j < 4; j++) {\n      if (+field.rows[i].cells[j].innerHTML === 2048) {\n        messageWin.classList.toggle('hidden');\n      }\n    }\n  }\n}\n\nfunction showLoseMessage() {\n  let isGameStopped = false;\n\n  for (let i = 0; i < 4; i++) {\n    for (let j = 0; j < 3; j++) {\n      if (+field.rows[j].cells[i].innerHTML\n          === +field.rows[j + 1].cells[i].innerHTML\n        || +field.rows[i].cells[j].innerHTML\n          === +field.rows[i].cells[j + 1].innerHTML\n        || +field.rows[i].cells[j].innerHTML === 0\n      ) {\n        return;\n      } else {\n        isGameStopped = true;\n      }\n    }\n  }\n\n  if (isGameStopped) {\n    messageLose.classList.toggle('hidden');\n  }\n}\n\nfunction changeCellColor() {\n  for (let i = 0; i < 4; i++) {\n    for (let j = 0; j < 4; j++) {\n      if (field.rows[i].cells[j].innerHTML === '0') {\n        field.rows[i].cells[j].className = 'field-cell';\n      } else {\n        field.rows[i].cells[j].className = `\n          field-cell field-cell--${field.rows[i].cells[j].innerHTML}\n        `;\n      }\n    }\n  }\n}\n"]}